<!DOCTYPE html>
<html>
<head>
  <title>Soccer Player Guessing Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    h1 {
      text-align: center;
    }

    #guess-form {
      text-align: center;
      margin-top: 20px;
    }

    #result {
      text-align: center;
      margin-top: 20px;
    }

    #player-image {
      max-width: 300px;
      margin: 20px auto;
      display: block;
    }
  </style>
</head>
<body>
  <h1>Soccer Player Guessing Game</h1>

  <div id="guess-form">
    <label for="guess">Guess a soccer player:</label>
    <input type="text" id="guess" placeholder="Enter player name">
    <button onclick="checkGuess()">Submit</button>
  </div>

  <div id="result"></div>

  <script>
    var csvURL = 'C:\Users\arulg\OneDrive\GuessFootballer\test_tmarkt.csv';
    var resultDiv = document.getElementById("result");

    fetch(csvURL)
      .then(response => response.text())
      .then(data => {
        var lines = data.trim().split('\n');
        var headers = lines[0].split(',');
        var players = [];

        for (var i = 1; i < lines.length; i++) {
          var currentLine = lines[i].split(',');
          var player = {};

          for (var j = 0; j < headers.length; j++) {
            player[headers[j]] = currentLine[j];
          }

          players.push(player);
        }

        // Call the function to start the game with the parsed player data
        startGame(players);
      })
      .catch(error => {
        console.error('Error fetching CSV data:', error);
      });

    var playerIndex;
    var player;
    var guessInput = document.getElementById("guess");
    var guessButton = document.querySelector("button");

    function startGame(players) {
      playerIndex = Math.floor(Math.random() * players.length);
      player = players[playerIndex];
      guessInput.disabled = false;
      resultDiv.innerHTML = "";
    }

    function checkGuess() {
      var guess = guessInput.value.trim();

      if (guess.toLowerCase() === player.name.toLowerCase()) {
        resultDiv.innerHTML = "<p>Correct!</p><img id='player-image' src='" + player.image_url + "' alt='Player Image'>";
        guessInput.disabled = true;
      } else {
        resultDiv.innerHTML = "<p>Incorrect. Keep guessing!</p>";
      }

      guessInput.value = "";
    }
  </script>
</body>
</html>